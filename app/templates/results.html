{% extends "base.html" %}

{% block content %}
<div class="main-content">
  <section class="section">

    <!-- Page Header -->
    <div class="section-header">
      <h1>Analysis Results</h1>
    </div>

    <div class="section-body">
      <div class="row justify-content-center">
        <div class="col-md-8 text-center">

          <!-- css override -->
          <style>
            .list-group-item {
              font-size: 1.25rem; 
            }

            .list-group-item i {
              font-size: 1.5rem; 
            }

            .badge {
              font-size: 1.1rem; 
            }
          </style>

          <!-- Show uploaded image -->
          <div class="d-flex justify-content-center mb-3">
            <img class="animal-image" src="{{ image_url }}" alt="Uploaded Image" class="img-fluid border rounded shadow">
          </div>

          <div class="card p-3 bg-light">
            <h4 class="mb-3">Predictions</h4>
            <ul class="list-group">
              {% for p in predictions %}
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <!-- Dictionary -->
                {% set icon_map = {
                  'Back condition': 'fa-spine',
                  'Excessive sleep': 'fa-moon',
                  'Eye condition': 'fa-eye',
                  'Limping': 'fa-crutch',
                  'Skin condition': 'fa-allergies',
                  'Scratching': 'fa-paw'
                } %}
                <i class="fas {{ icon_map.get(p.tagName, 'fa-question-circle') }}" style="color: {{ p.color }};"></i>

                <span>{{ p.tagName }}</span>
                <span class="badge badge-pill text-white" style="background-color: {{ p.color }}">
                  {{ "%.2f"|format(p.probability * 100) }}%
                </span>
              </li>
              {% endfor %}
            </ul>
          </div>

          <!-- Upload another image button -->
          <a href="/" class="btn btn-primary mt-4">Upload Another Image</a>
        </div>
      </div>
    </div>

  </section>
</div>
{% endblock %}
